<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concordia GPE Internal Database</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
        }
        /* Grid Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 2fr; /* 1/3 to 2/3 split */
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .left-col {
            display: flex;
            flex-direction: column;
        }
        .right-col {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .container-box {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1, h2 {
            color: #2c3e50;
            margin-top: 0;
        }
        .search-container, .add-container {
            padding: 15px;
            background: #ecf0f1;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .search-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        input[type="text"], input[type="url"], textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.2s ease;
        }
        button:hover {
            background-color: #2980b9;
        }
        .btn-clear {
            background-color: #95a5a6;
            width: auto;
            white-space: nowrap;
        }
        .btn-clear:hover {
            background-color: #7f8c8d;
        }
        .btn-export {
            background-color: #2ecc71;
            margin-top: 10px;
        }
        .btn-export:hover {
            background-color: #27ae60;
        }
        .journal-list {
            list-style-type: none;
            padding: 0;
        }
        .journal-item {
            background: #fff;
            border: 1px solid #e0e0e0;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 5px;
            border-left: 5px solid #e74c3c;
        }
        .journal-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        .journal-title a {
            color: #2980b9;
            text-decoration: none;
        }
        .journal-rationale {
            color: #555;
            line-height: 1.5;
            margin-top: 8px;
        }
        .rationale-label {
            font-weight: bold;
            font-size: 0.9em;
        }
        .version-info {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 0.9em;
            color: #7f8c8d;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 3px;
        }
        .empty-state {
            color: #7f8c8d;
            text-align: center;
            margin-top: 50px;
            font-style: italic;
        }
        .total-badge {
            font-size: 0.6em;
            background: #34495e;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            vertical-align: middle;
            margin-left: 10px;
        }
    </style>
</head>
<body>

<div class="main-layout">
    <div class="left-col">
        <div class="container-box">
            <h1>GPE Journal Database</h1>
            <p style="font-size: 0.85em; margin-bottom: 20px; color: #666;">Search or add questionable journals to the internal Concordia GPE database.</p>
            
            <div class="search-container">
                <h2 style="font-size: 1.2em;">Search</h2>
                <div class="search-controls">
                    <input type="text" id="searchInput" onkeyup="searchJournals()" placeholder="Enter journal name..." style="margin: 0;">
                    <button class="btn-clear" onclick="clearSearch()">Clear</button>
                </div>
            </div>

            <div class="add-container">
                <h2 style="font-size: 1.2em;">Add New</h2>
                <input type="text" id="newJournalName" placeholder="Journal Name">
                <input type="url" id="newJournalLink" placeholder="Homepage URL">
                <textarea id="newJournalRationale" rows="3" placeholder="Rationale..."></textarea>
                <button id="addBtn" onclick="addJournal()">Add Entry</button>
            </div>

            <div class="container" style="box-shadow: none; padding: 10px 0; background: transparent; margin-bottom: 20px; border-top: 1px solid #eee;">
                <p style="text-align: justify; line-height: 1.5; font-size: 0.9em; font-weight: bold; color: #2c3e50;">If a journalâ€™s legitimacy is in question, it is recommended to consult the resources below, all of which involve rigorous vetting processes:</p>
                <ul style="list-style-type: none; padding-left: 0; text-align: left; margin-top: 10px;">
                    <li style="text-align: left; line-height: 1.6; margin-bottom: 8px;"><a href="https://doaj.org/" target="_blank" rel="noopener noreferrer" style="color: #2980b9; text-decoration: none;">&rarr; Directory of Open Access Journals (DOAJ)</a></li>
                    <li style="text-align: left; line-height: 1.6; margin-bottom: 8px;"><a href="https://www.elsevier.com/products/scopus" target="_blank" rel="noopener noreferrer" style="color: #2980b9; text-decoration: none;">&rarr; Scopus</a></li>
                    <li style="text-align: left; line-height: 1.6; margin-bottom: 8px;"><a href="https://publicationethics.org/" target="_blank" rel="noopener noreferrer" style="color: #2980b9; text-decoration: none;">&rarr; Committee on Publication Ethics (COPE) membership list</a></li>
                </ul>
                
                <div style="text-align: right; margin-top: 10px;">
                    <time datetime="2026-02-24">Updated Feb 24, 2026 Ver 1.5</time>
                </div>
            </div>
            
            <button class="btn-export" onclick="exportToCSV()">Export All to CSV</button>
        </div>
    </div>

    <div class="right-col" id="resultsArea">
        <div id="resultsContent">
            <h2 id="resultsTitle">Database Status <span id="totalCount" class="total-badge">0</span></h2>
            <div id="loadingMessage" style="font-style: italic;">Connecting to Google Sheets...</div>
            <ul id="journalList" class="journal-list">
                <li class="empty-state">Enter a search term on the left to view specific entries.</li>
            </ul>
        </div>
    </div>
</div>

<div class="version-info">
    <time datetime="2026-02-24">Updated Feb 24, 2026 Ver 3.1</time>
</div>

<script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxs1367Mh_Qj37vXbkYdifnaIGL2MdOBgqhP9XNu4HjnKMV3mle1OfU_A7eyOuRZUbusg/exec";

    let fallbackJournals = [
        { title: "Journal of Geography & Natural Disasters (OMICS International)", rationale: "Published by OMICS, subject of FTC lawsuit for deceptive practices.", link: "https://www.omicsonline.org/geography-natural-disasters.php" },
        { title: "Environment and Ecology Research (Horizon Research Publishing)", rationale: "HRPUB cited for questionable editorial board practices.", link: "https://www.hrpub.org/journals/jour_info.php?id=40" },
        { title: "Sustainability (MDPI)", rationale: "Gray-market; criticized for aggressive special issue model.", link: "https://www.mdpi.com/journal/sustainability" },
        { title: "Journal of Environmental Science and Public Health (Fortune Journals)", rationale: "Flagged for misleading indexing claims and vanishing papers.", link: "https://www.fortunejournals.com/journal-of-environmental-science-and-public-health.html" },
        { title: "World Journal of Environmental Engineering (Science and Education Publishing)", rationale: "Potentially predatory; lack of transparency and minimal oversight.", link: "http://www.sciepub.com/journal/WJEE" },
        { title: "International Journal of Sustainable Development and Green Economics (IASTEM)", rationale: "Associated with predatory conferences and collection of APCs.", link: "http://www.iastem.org/" },
        { title: "International Journal of Social Science and Humanity (IEDRC)", rationale: "Considered low-tier/predatory; associated with spamming.", link: "http://www.ijssh.org/" },
        { title: "Urban Planning and Design (Science Publishing Group)", rationale: "Known predatory publisher; uses spam to attract submissions.", link: "https://www.sciencepublishinggroup.com/journal/index?journalid=162" }
    ];

    let journals = [];

    const journalListElement = document.getElementById('journalList');
    const loadingMessage = document.getElementById('loadingMessage');
    const resultsTitle = document.getElementById('resultsTitle');
    const totalCountElement = document.getElementById('totalCount');

    function updateTotalCount() {
        totalCountElement.textContent = journals.length;
    }

    async function fetchFromSheet() {
        if (WEB_APP_URL === "YOUR_GOOGLE_WEB_APP_URL_HERE") {
            journals = [...fallbackJournals];
            loadingMessage.textContent = "Offline Mode: Using local fallback data.";
            updateTotalCount();
            return;
        }
        try {
            const response = await fetch(WEB_APP_URL, { redirect: 'follow' });
            const sheetData = await response.json();
            if (sheetData && sheetData.length > 0) {
                journals = sheetData.reverse();
            } else {
                journals = [...fallbackJournals];
            }
            loadingMessage.textContent = "Database Connected: Ready to search.";
        } catch (error) {
            console.error("Sync Error:", error);
            journals = [...fallbackJournals];
            loadingMessage.textContent = "Offline Mode: Using local fallback data.";
        }
        updateTotalCount();
    }

    function renderJournals(data, isSearch) {
        journalListElement.innerHTML = '';
        if (!isSearch) {
            resultsTitle.innerHTML = `Database Status <span id="totalCount" class="total-badge">${journals.length}</span>`;
            journalListElement.innerHTML = '<li class="empty-state">Enter a search term on the left to view specific entries.</li>';
            return;
        }

        resultsTitle.innerHTML = `Search Results (${data.length})`;
        if (data.length === 0) {
            journalListElement.innerHTML = '<li class="empty-state">No journals found matching that name.</li>';
            return;
        }

        data.forEach(journal => {
            const li = document.createElement('li');
            li.className = 'journal-item';
            const link = journal.link ? `<a href="${journal.link}" target="_blank" rel="noopener noreferrer">${journal.title}</a>` : journal.title;
            li.innerHTML = `<div class="journal-title">${link}</div><div class="journal-rationale"><span class="rationale-label">Rationale: </span>${journal.rationale}</div>`;
            journalListElement.appendChild(li);
        });
    }

    function searchJournals() {
        const query = document.getElementById('searchInput').value.toLowerCase().trim();
        if (query === "") {
            renderJournals([], false);
            return;
        }
        const filtered = journals.filter(j => j.title.toLowerCase().includes(query));
        renderJournals(filtered, true);
    }

    function clearSearch() {
        document.getElementById('searchInput').value = "";
        renderJournals([], false);
    }

    async function addJournal() {
        const nameInput = document.getElementById('newJournalName');
        const linkInput = document.getElementById('newJournalLink');
        const rationaleInput = document.getElementById('newJournalRationale');
        const addBtn = document.getElementById('addBtn');
        
        const entry = { title: nameInput.value.trim(), link: linkInput.value.trim(), rationale: rationaleInput.value.trim() };
        if (!entry.title || !entry.rationale) { alert("Title and Rationale are required."); return; }

        journals.unshift(entry);
        updateTotalCount();
        nameInput.value = ''; linkInput.value = ''; rationaleInput.value = '';
        
        if (WEB_APP_URL !== "YOUR_GOOGLE_WEB_APP_URL_HERE") {
            addBtn.textContent = "Saving..."; addBtn.disabled = true;
            try {
                await fetch(WEB_APP_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(entry) });
                alert('Entry Added!');
            } catch (e) { alert("Local save only."); }
            addBtn.textContent = "Add Entry"; addBtn.disabled = false;
        }
        searchJournals();
    }

    function exportToCSV() {
        let csv = "data:text/csv;charset=utf-8,Journal Title,Link,Rationale\n";
        journals.forEach(j => {
            csv += `"${j.title.replace(/"/g, '""')}","${(j.link||"").replace(/"/g, '""')}","${j.rationale.replace(/"/g, '""')}"\n`;
        });
        const link = document.createElement("a");
        link.href = encodeURI(csv);
        link.download = "journal_database.csv";
        link.click();
    }

    fetchFromSheet();
</script>
</body>
</html>
